{
  "id": "snapshot_1771869707247_3ictni677",
  "approvalId": "approval_1771869695778_powbyftuf",
  "approvalTitle": "Tasks: Bot PR アサインスキップ実装タスク一覧",
  "version": 2,
  "timestamp": "2026-02-23T18:01:47.247Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Tasks Document\n\n- [ ] 1. `auto-assign-pr.yml` に Bot 判定と分岐ロジックを実装\n  - File: `.github/workflows/auto-assign-pr.yml`\n  - `workflow_call.inputs` に `bot-assignees` パラメータ（string, optional, default: ''）を追加\n  - Bot 判定ステップ（`github.actor` が `[bot]` で終わるかチェック）を追加\n  - Human ユーザー: 従来通り `gh pr edit --add-assignee` で PR 作成者をアサイン\n  - Bot + `bot-assignees` 指定あり: 指定ユーザーをカンマ区切りでアサイン\n  - Bot + `bot-assignees` 未指定: スキップしてログ出力\n  - Purpose: Bot PR でのワークフロー失敗を防止し、代替アサイン先を指定可能にする\n  - _Leverage: 既存の `auto-assign-pr.yml` の構造、`gh pr edit --add-assignee` パターン_\n  - _Requirements: 1, 2, 3_\n  - _Prompt: Implement the task for spec fix-auto-assign-bot-skip, first run spec-workflow-guide to get the workflow guide then implement the task: Role: GitHub Actions Workflow Developer | Task: Modify `.github/workflows/auto-assign-pr.yml` to add bot detection and conditional assignment logic. Add `bot-assignees` input parameter to `workflow_call`. Add a step to check if `github.actor` ends with `[bot]`. If human, assign PR creator. If bot with `bot-assignees`, assign specified users. If bot without `bot-assignees`, skip and log. Reference the design document at `.spec-workflow/specs/fix-auto-assign-bot-skip/design.md` for the exact YAML implementation. | Restrictions: Do not use `github.actor_type` (it does not exist). Do not add external actions (only `gh` CLI). Maintain `permissions: {}` at top level. Keep `pull-requests: write` at job level. Follow the project's actionlint/ghalint/zizmor CI requirements. | Success: The workflow has `bot-assignees` input, correctly detects bot actors, assigns appropriately based on the input, and skips gracefully when no bot-assignees are specified. After implementation, mark task as in-progress in tasks.md, log the implementation with log-implementation tool, then mark as complete._\n\n- [ ] 2. `my-setup-pr.yml` に `bot-assignees` パラメータを追加\n  - File: `.github/workflows/my-setup-pr.yml`\n  - `uses: ./.github/workflows/auto-assign-pr.yml` の呼び出しに `with: bot-assignees: 'kryota-dev'` を追加\n  - Purpose: Bot PR（Renovate Bot 等）で kryota-dev にアサインされるようにする\n  - _Leverage: 既存の `my-setup-pr.yml` の構造_\n  - _Requirements: 4_\n  - _Prompt: Implement the task for spec fix-auto-assign-bot-skip, first run spec-workflow-guide to get the workflow guide then implement the task: Role: GitHub Actions Workflow Developer | Task: Modify `.github/workflows/my-setup-pr.yml` to pass `bot-assignees: 'kryota-dev'` when calling `auto-assign-pr.yml`. Add `with:` block to the existing `uses:` directive. | Restrictions: Keep the thin wrapper pattern (no logic in this file). Do not change the trigger, permissions, or job name. | Success: `my-setup-pr.yml` passes `bot-assignees: 'kryota-dev'` to `auto-assign-pr.yml`. After implementation, mark task as in-progress in tasks.md, log the implementation with log-implementation tool, then mark as complete._\n\n- [ ] 3. `auto-assign-pr.md` ドキュメントを更新\n  - File: `.github/workflows/docs/auto-assign-pr.md`\n  - `bot-assignees` 入力パラメータの説明を Inputs セクションに追加\n  - Bot PR 時の動作説明を追加\n  - 使用例を更新（`bot-assignees` 指定ありの例を追加）\n  - Purpose: ワークフロードキュメントを実装に合わせて更新する\n  - _Leverage: 既存の `auto-assign-pr.md` のフォーマット_\n  - _Requirements: 1, 4_\n  - _Prompt: Implement the task for spec fix-auto-assign-bot-skip, first run spec-workflow-guide to get the workflow guide then implement the task: Role: Technical Writer | Task: Update `.github/workflows/docs/auto-assign-pr.md` to document the new `bot-assignees` input parameter. Add an Inputs table describing the parameter. Add a section explaining bot PR behavior. Update the usage example to show how to pass `bot-assignees`. | Restrictions: Follow the existing documentation format and style. Write in Japanese. Do not change the existing structure unnecessarily. | Success: Documentation accurately describes the new `bot-assignees` parameter, bot detection behavior, and includes a usage example with bot-assignees. After implementation, mark task as in-progress in tasks.md, log the implementation with log-implementation tool, then mark as complete._\n\n- [ ] 4. actionlint による構文チェック\n  - Run: `aqua exec -- actionlint`\n  - Purpose: 修正したワークフローファイルが actionlint を通過することを確認する\n  - _Requirements: Non-functional (CI quality gate)_\n  - _Prompt: Implement the task for spec fix-auto-assign-bot-skip, first run spec-workflow-guide to get the workflow guide then implement the task: Role: CI/CD Engineer | Task: Run `aqua exec -- actionlint` to verify the modified workflow files pass syntax checking. If errors are found, fix them in the relevant workflow files. | Restrictions: Do not disable or skip any lint rules. Fix issues at the source. | Success: `actionlint` exits with no errors for all workflow files. After verification, mark task as in-progress in tasks.md, log the implementation with log-implementation tool, then mark as complete._\n",
  "fileStats": {
    "size": 5417,
    "lines": 38,
    "lastModified": "2026-02-23T18:01:29.648Z"
  },
  "comments": []
}